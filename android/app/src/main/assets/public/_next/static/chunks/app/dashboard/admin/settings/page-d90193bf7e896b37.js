(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[775],{3998:(e,t,i)=>{"use strict";i.d(t,{$:()=>d,r:()=>l});var r=i(95155),a=i(12115),n=i(32467),o=i(83101),s=i(64269);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:i,variant:a,size:o,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,r.jsx)(u,{className:(0,s.cn)(l({variant:a,size:o,className:i})),ref:t,...c})});d.displayName="Button"},15894:(e,t,i)=>{"use strict";i.d(t,{dj:()=>u});var r=i(12115);let a=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},s=[],l={toasts:[]};function d(e){l=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:i}=t;return i?o(i):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===i||void 0===i?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(l,e),s.forEach(e=>{e(l)})}function c(e){let{...t}=e,i=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:i});return d({type:"ADD_TOAST",toast:{...t,id:i,open:!0,onOpenChange:e=>{e||r()}}}),{id:i,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:i}})}}function u(){let[e,t]=r.useState(l);return r.useEffect(()=>(s.push(t),()=>{let e=s.indexOf(t);e>-1&&s.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},20063:(e,t,i)=>{"use strict";var r=i(47260);i.o(r,"usePathname")&&i.d(t,{usePathname:function(){return r.usePathname}}),i.o(r,"useRouter")&&i.d(t,{useRouter:function(){return r.useRouter}})},32467:(e,t,i)=>{"use strict";i.d(t,{DX:()=>u,TL:()=>c});var r,a=i(12115),n=i(94446),o=i(95155),s=Symbol.for("react.lazy"),l=(r||(r=i.t(a,2)))[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===s&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function c(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:i,...r}=e;if(d(i)&&"function"==typeof l&&(i=l(i._payload)),a.isValidElement(i)){var o;let e,s,l=(o=i,(s=(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.ref:(s=(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.props.ref:o.props.ref||o.ref),d=function(e,t){let i={...t};for(let r in t){let a=e[r],n=t[r];/^on[A-Z]/.test(r)?a&&n?i[r]=(...e)=>{let t=n(...e);return a(...e),t}:a&&(i[r]=a):"style"===r?i[r]={...a,...n}:"className"===r&&(i[r]=[a,n].filter(Boolean).join(" "))}return{...e,...i}}(r,i.props);return i.type!==a.Fragment&&(d.ref=t?(0,n.t)(t,l):l),a.cloneElement(i,d)}return a.Children.count(i)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),i=a.forwardRef((e,i)=>{let{children:r,...n}=e;d(r)&&"function"==typeof l&&(r=l(r._payload));let s=a.Children.toArray(r),c=s.find(m);if(c){let e=c.props.children,r=s.map(t=>t!==c?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,o.jsx)(t,{...n,ref:i,children:a.isValidElement(e)?a.cloneElement(e,void 0,r):null})}return(0,o.jsx)(t,{...n,ref:i,children:r})});return i.displayName=`${e}.Slot`,i}var u=c("Slot"),p=Symbol("radix.slottable");function m(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===p}},42823:(e,t,i)=>{Promise.resolve().then(i.bind(i,77959))},77959:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>h});var r=i(95155),a=i(12115),n=i(7782),o=i(12298),s=i(3998),l=i(86948),d=i(15894),c=i(92033),u=i(19708);let p=[{name:"Elettrica",averageAnnualMileage:1e4},{name:"Ibrida",averageAnnualMileage:12e3},{name:"GPL",averageAnnualMileage:15e3},{name:"Metano",averageAnnualMileage:15e3}],m=[{description:"Revisione ministeriale",intervalTime:24},{description:"Pagamento assicurazione annuale",intervalTime:12},{description:"Scadenza patente di guida",intervalTime:120}],f={Ibrida:[{description:"Cambio olio e filtro olio (motore termico)",intervalMileage:15e3,intervalTime:12},{description:"Controllo stato batteria ad alta tensione",intervalMileage:2e4,intervalTime:12},{description:"Controllo sistema frenante (frenata rigenerativa)",intervalMileage:3e4,intervalTime:24},{description:"Sostituzione liquido raffreddamento inverter",intervalMileage:8e4,intervalTime:60},...m],Elettrica:[{description:"Controllo stato batteria ad alta tensione",intervalMileage:25e3,intervalTime:12},{description:"Sostituzione liquido freni",intervalMileage:5e4,intervalTime:24},{description:"Sostituzione filtro abitacolo",intervalMileage:25e3,intervalTime:12},{description:"Controllo usura pneumatici",intervalMileage:15e3,intervalTime:12},...m],GPL:[{description:"Cambio olio e filtro olio",intervalMileage:15e3,intervalTime:12},{description:"Controllo e sostituzione filtro aria",intervalMileage:3e4,intervalTime:24},{description:"Sostituzione candele",intervalMileage:6e4,intervalTime:48},{description:"Controllo liquido freni",intervalMileage:3e4,intervalTime:24},{description:"Revisione bombola GPL",intervalTime:120},...m],Metano:[{description:"Cambio olio e filtro olio",intervalMileage:15e3,intervalTime:12},{description:"Controllo e sostituzione filtro aria",intervalMileage:3e4,intervalTime:24},{description:"Sostituzione candele",intervalMileage:6e4,intervalTime:48},{description:"Controllo liquido freni",intervalMileage:3e4,intervalTime:24},{description:"Revisione bombole Metano",intervalTime:48},...m]},v=async e=>{let t=(0,u.wP)(e),i=!1;try{let r=(0,u.rJ)(e,"vehicleTypes");(await (0,u.GG)((0,u.P)(r,(0,u.AB)(1)))).empty&&(i=!0,p.forEach(i=>{let r=i.name.toLowerCase(),a=(0,u.H9)(e,"vehicleTypes",r);t.set(a,{id:r,name:i.name,averageAnnualMileage:i.averageAnnualMileage,dataoraelimina:null});let n=f[i.name];n&&n.forEach(e=>{let i=(0,u.H9)((0,u.rJ)(a,"maintenanceChecks"));t.set(i,{...e,id:i.id,vehicleTypeId:r,dataoraelimina:null})})}))}catch(e){return{success:!1,message:"Errore durante il controllo dei tipi veicolo: ".concat(e.message)}}if(!i)return{success:!0,message:"Dati dei tipi veicolo gi\xe0 presenti. Nessuna operazione eseguita."};try{return await t.commit(),{success:!0,message:"Tipi veicolo e controlli standard creati con successo!"}}catch(e){if("permission-denied"===e.code)return{success:!1,message:"Permesso negato. Solo gli amministratori possono creare i dati globali."};return{success:!1,message:"Errore durante il salvataggio dei dati: ".concat(e.message)}}};var g=i(20063);function h(){let{user:e,loading:t}=(0,o.J)(),{firestore:i}=(0,n.D3)(),u=(0,g.useRouter)(),{toast:p}=(0,d.dj)(),[m,f]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t||e&&"Amministratore"===e.role||u.push("/dashboard")},[e,t,u]);let h=async()=>{if(!i)return;f(!0);let e=await v(i);f(!1),e.success?p({title:"Successo!",description:e.message}):p({variant:"destructive",title:"Errore",description:e.message})};return t?(0,r.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,r.jsx)(c.A,{className:"h-8 w-8 animate-spin"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"font-headline text-3xl font-bold",children:"Impostazioni Amministrazione"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Azioni di manutenzione per l'applicazione."})]}),(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Dati Iniziali"}),(0,r.jsx)(l.BT,{children:'Se i dati globali come "Tipi Veicolo" o "Ruoli" non sono presenti, puoi usare questo pulsante per crearli. Questa operazione \xe8 sicura da eseguire pi\xf9 volte e non sovrascriver\xe0 i dati esistenti.'})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)(s.$,{onClick:h,disabled:m,children:[m&&(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Popola Dati Globali"]})})]})]})}},86948:(e,t,i)=>{"use strict";i.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>o,aR:()=>s,wL:()=>u});var r=i(95155),a=i(12115),n=i(64269);let o=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",i),...a})});o.displayName="Card";let s=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",i),...a})});s.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",i),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",i),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",i),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:i,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",i),...a})});u.displayName="CardFooter"},92033:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(14294).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},e=>{e.O(0,[992,811,909,668,470,441,255,358],()=>e(e.s=42823)),_N_E=e.O()}]);